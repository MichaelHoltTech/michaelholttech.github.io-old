<!DOCTYPE html>
<<<<<<< HEAD
<html lang="en-us">
<head>
    <title>Raspberry Pi Camera Matrix &middot; Michael Holt</title>
    <meta name="generator" content="Hugo 0.14" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Michael Holt">
    
    
    <link rel="icon" href="http://localhost:1313/favicon.ico">
    <link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png" />
    <link rel="stylesheet" href="http://localhost:1313/css/style.css">
    <link rel="stylesheet" href="http://localhost:1313/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://localhost:1313/css/monokai.css">
    <link rel="stylesheet" href="http://localhost:1313/fancybox/jquery.fancybox.css">
    <meta property="og:title" content="Raspberry Pi Camera Matrix" />
<meta property="og:description" content="I have posted version 2 of this script HERE Over the last few months we&rsquo;ve been upgrading our Security Cameras, replacing a 10 year old vitek system with the Ubiquiti Unifi Video system. We just finished installing the last of these Cameras and that included the need to find a new solution for our Children&rsquo;s Cameras to be displayed onto two TV&rsquo;s. I found a Forum Post on the Ubiquiti Community that documented one person&rsquo;s script to display a 2x2 Camera Matrix on a Raspberry Pi So I went ahead and order 2x Raspberry Pi&rsquo;s to power both of these displays and thought &ldquo;Perfect, someone else has done the leg work all I have to do is plug in the RTSP URL&rsquo;s and presto&rdquo;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" />


<meta property="og:updated_time" content="2015-08-21T14:46:39-08:00"/>










    
    
<meta itemprop="name" content="Raspberry Pi Camera Matrix">
<meta itemprop="description" content="I have posted version 2 of this script HERE Over the last few months we&rsquo;ve been upgrading our Security Cameras, replacing a 10 year old vitek system with the Ubiquiti Unifi Video system. We just finished installing the last of these Cameras and that included the need to find a new solution for our Children&rsquo;s Cameras to be displayed onto two TV&rsquo;s. I found a Forum Post on the Ubiquiti Community that documented one person&rsquo;s script to display a 2x2 Camera Matrix on a Raspberry Pi So I went ahead and order 2x Raspberry Pi&rsquo;s to power both of these displays and thought &ldquo;Perfect, someone else has done the leg work all I have to do is plug in the RTSP URL&rsquo;s and presto&rdquo;.">


<meta itemprop="dateModified" content="2015-08-21T14:46:39-08:00" />
<meta itemprop="wordCount" content="710">



<meta itemprop="keywords" content="mac-management,puppet,raspberry-pi,ubiquiti,unifi-video,puppet-tutorial," />

    

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:title" content="Raspberry Pi Camera Matrix"/>
<meta name="twitter:description" content="I have posted version 2 of this script HERE Over the last few months we&rsquo;ve been upgrading our Security Cameras, replacing a 10 year old vitek system with the Ubiquiti Unifi Video system. We just finished installing the last of these Cameras and that included the need to find a new solution for our Children&rsquo;s Cameras to be displayed onto two TV&rsquo;s. I found a Forum Post on the Ubiquiti Community that documented one person&rsquo;s script to display a 2x2 Camera Matrix on a Raspberry Pi So I went ahead and order 2x Raspberry Pi&rsquo;s to power both of these displays and thought &ldquo;Perfect, someone else has done the leg work all I have to do is plug in the RTSP URL&rsquo;s and presto&rdquo;."/>



</head>
<body>
<div class="container">

<header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="http://localhost:1313/" id="logo"><i class="logo" style="background-image: url('http://localhost:1313/css/images/logo.png')"></i><span class="site-title">Michael Holt</span></a>
      <nav id="main-nav">
          
          
          <a class="main-nav-link" href="http://localhost:1313/">Home</a>
          
          
          
          
          
          

          

          
          
          
          
          <a class="main-nav-link" href="http://localhost:1313/tags/">Tags</a>
          
          
          
          <a class="main-nav-link" href="http://localhost:1313/categories/">Categories</a>
          
          
      </nav>
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="http://localhost:1313/css/images/avatar.png"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
              <input type="search" name="q" results="0" class="search-form-input" placeholder="Search">
              <button type="submit" class="search-form-submit">
              </button>
              <input type="hidden" name="q" value="site:http://localhost:1313/">
         </form>
        </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          
          
          <td><a class="main-nav-link" href="http://localhost:1313/">Home</a></td>
          
          
          
          
          
          

          

          
          
          
          
          <td><a class="main-nav-link" href="http://localhost:1313/tags/">Tags</a></td>
          
          
          
          <td><a class="main-nav-link" href="http://localhost:1313/categories/">Categories</a></td>
          
          
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" results="0" class="search-form-input" placeholder="Search">
          <input type="hidden" name="q" value="site:http://localhost:1313/">
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>


<div id="container">
   <div class="outer">
    <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="http://localhost:1313/css/images/avatar.png">
      <h2 id="name">Michael Holt</h2>
      <h3 id="title">I am an IT Administrator, Network Admin, Server Admin, Programmer, and Jack-Of-All-Trades serving the lord and the church with my talents.</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Valencia, CA</span>
      
          <a id="follow" href="https://github.com/digitalcraftsman">
              Follow
          </a>
      
    </div>
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          





































=======
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Raspberry Pi Camera Matrix - A Church MacAdmin's Blog</title>
  <meta name="author" content="Michael Holt">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.mholt.tech/blog/2015/08/21/raspberry-pi-camera-matrix/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="A Church MacAdmin's Blog" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://www.mholt.tech/blog/2015/08/21/raspberry-pi-camera-matrix/">
  <meta property="og:title" content="Raspberry Pi Camera Matrix - A Church MacAdmin's Blog">
  

  <!-- ... -->

<link href="http://bootswatch.com/yeti/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/twitter.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/aboutme.css" rel="stylesheet" type="text/css">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/javascripts/footnote.js"></script>
<script src="/javascripts/twitterFetcher_min.js"></script>
<!-- ... -->


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42255033-2', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">A Church MacAdmin's Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="www.mholt.tech">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="A Church MacAdmin's Blog" />
    
    <meta itemprop="url" content="http://www.mholt.tech" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        
>>>>>>> parent of 90de704... Erase old site












<<<<<<< HEAD
          <td><a href="//github.com/MichaelHoltTech" target="_blank" title="Github"><i class="fa fa-github"></i></a></td>
          <td><a href="//twitter.com/mholtrlc" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>
          <td><a href="" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></td>
        </tr>
      </table>
    </div>
    <div class="contact-info profile-block">
      <p style="text-align: center; font-size: 85%; font-style: italic;">The opinions and posts on this site are my own and are not necessarily shared by my employer.</p>
    </div>
  </div>
</aside>

    <section id="main">
    <article id="page-undefined" class="article article-type-page" itemscope="" itemprop="blogPost">
        <div class="article-inner">
            

            <header class="article-header">
    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix">
    <h1 class="article-title" itemprop="name">
        Raspberry Pi Camera Matrix
    </h1>
    </a>
    <div class="article-meta">
        <div class="article-date">
            <i class="fa fa-calendar"></i>
            <time datetime="2015-08-21 14:46:39 -0800 -0800" itemprop="datePublished">2015-08-21</time>
            &middot;
            710
            words
            &middot;
            4
            minute read
        </div>
        <div class="article-category">
            
            <i class="fa fa-folder"></i>
            <a class="article-category-link" href="http://localhost:1313/categories/unifi%20video">Unifi Video</a>
            
            <i class="fa fa-folder"></i>
            <a class="article-category-link" href="http://localhost:1313/categories/ubiquiti">Ubiquiti</a>
            
            <i class="fa fa-folder"></i>
            <a class="article-category-link" href="http://localhost:1313/categories/raspberry%20pi">Raspberry Pi</a>
            
        </div>
    </div>
</header>

            <div class="article-entry" itemprop="articleBody">
                

<h2 id="i-have-posted-version-2-of-this-script-here-http-www-mholt-tech-blog-2015-08-29-pi-cam-matrix-v2:d0904f9017f523d8bddb9dd66c65f39e">I have posted version 2 of this script <a href="http://www.mholt.tech/blog/2015/08/29/pi-cam-matrix-v2/">HERE</a></h2>

<p>Over the last few months we&rsquo;ve been upgrading our Security Cameras, replacing a 10 year old vitek system with the Ubiquiti Unifi Video system.  We just finished installing the last of these Cameras and that included the need to find a new solution for our Children&rsquo;s Cameras to be displayed onto two TV&rsquo;s.  I found a Forum Post on the Ubiquiti Community that documented one person&rsquo;s script to display a <a href="http://community.ubnt.com/t5/UniFi-Video/Tutorial-Raspberry-Pi-4-Cam-Matrix-Viewer-Appliance/m-p/1253309#U1253309">2x2 Camera Matrix on a Raspberry Pi</a></p>

<p>So I went ahead and order 2x Raspberry Pi&rsquo;s to power both of these displays and thought &ldquo;Perfect, someone else has done the leg work all I have to do is plug in the RTSP URL&rsquo;s and presto&rdquo;.  Unfortunatly, I ran into some issues with screen causing the video to jump a few seconds instead of playing smoothly.  I also couldn&rsquo;t get the code working as an init.d so I took a different approach using rc.local.</p>

<p>For those that are interested in how to make this happen here&rsquo;s the instructions and code:</p>

<p>** What you&rsquo;ll need:**</p>

<ul>
<li>Raspberry Pi2 (I got the Canakit Raspberry Pi 2 - Complete Starter Kit off of Amazon, comes with everything you need for this project)</li>
<li>Unifi NVR Software running the most recent stable release</li>
<li>HDTV or Computer Monitor capable of 1080p</li>
<li>MicroSD to SD Card Adapter (Optional, only needed if you have to re-install raspbian)</li>
<li>Keyboard for initial setup</li>
</ul>

<h3 id="instructions:d0904f9017f523d8bddb9dd66c65f39e">Instructions</h3>

<ol>
<li><p><strong>Put together and connect you PI2</strong></p>

<p>Refer to the quick-start guide that is in the Box in order to get started with your Raspberry Pi and install Raspbian using the pre-loaded NOOBS installer on the SD Card</p></li>

<li><p><strong>Configure Raspbian</strong></p>

<p>Once you arrive at the Raspi-Config screen you should change the default password (Option 2) and set a hostname (Option 8 - A2).</p>

<p>After this is done click finish and you will be dropped to the command line. Overclocking is also possible, but not required or recommended for what we are doing.</p>

<p>For more information on raspi-config, see <a href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">https://www.raspberrypi.org/documentation/configuration/raspi-config.md</a></p></li>

<li><p><strong>Get the code</strong></p>

<p>You can get the code from GitHub by entering:</p>

<pre><code>git clone https://gist.github.com/dde9de96b6a4d72b7f58.git raspicams
</code></pre></li>

<li><p><strong>Edit the files for your configuration</strong></p>

<ul>
<li><p>cd into raspicams by entering:</p>

<pre><code> cd ~/raspicams
</code></pre></li>

<li><p>edit cams.sh by typing:</p>

<p><code>nano cams.sh</code></p></li>

<li><p>replace <rtsp_url_using_ip> with the RTSP url&rsquo;s for your cameras (I recommend using the Low Quality to save bandwidth and using an IP Address instead of FQDN to ensure no issues arrise.)  This url can be found in the NVR under RTSP Service when editing a camera</p></li>

<li><p>exit nano by hitting ctrl + x then entering y to save and enter to keep the filename</p></li>

<li><p>edit network-interfaces and set static IP address configuration for eth0 (Optional but Highly Recommended)</p></li>
</ul></li>

<li><p><strong>Copy the files into place</strong></p>

<ul>
<li>While still inside of ~/raspicams run this in order to copy all of these files into place:</li>
</ul>

<p><code>sudo chown root:root boot-config.txt network-interfaces rc.local cmdline.txt &amp; sudo chmod +x * &amp; sudo cp boot-config.txt /boot/config.txt &amp; sudo cp cmdline.txt /boot/cmdline.txt &amp; sudo cp rc.local /etc/rc.local &amp; sudo cp cams.sh ~/cams.sh</code></p>

<ul>
<li>If you have also configured a static IP in network-interfaces run this command to copy that file into place:</li>
</ul>

<p><code>sudo cp network-interfaces /etc/network/interfaces</code></p></li>

<li><p><strong>Reboot the Pi</strong></p>

<p>At this point all of your configuration is done.  All that&rsquo;s left to do is reboot the Pi and let the cameras load up.  Enter this command to tell the Pi to reboot:</p>

<p><code>sudo reboot</code></p></li>
</ol>

<h3 id="troubleshooting:d0904f9017f523d8bddb9dd66c65f39e">Troubleshooting</h3>

<ul>
<li><strong>Display Issues:</strong></li>
</ul>

<p>If you&rsquo;re having strange display issues, such as banding, flickering, or the display just shuts off, it&rsquo;s somewhat expected for the Raspberry Pi.  To troubleshoot, you&rsquo;re going to have to make some changes to the /boot/config.txt file in order to force certain modes and resolutions.   The included config.txt works for my setup but your milage may vary depending on your TV/Monitor.</p>

<ul>
<li><strong>Starting with a Fresh Raspbian Install:</strong></li>
</ul>

<p>This is where you are going to need that option MicroSD to SD Card adapter.  I&rsquo;m not going to cover how to do that because the instructions are easily found on the internet.  Easiest ones to follow are at <a href="https://www.raspberrypi.org/documentation/installation/noobs.md">https://www.raspberrypi.org/documentation/installation/noobs.md</a></p>

<ul>
<li><strong>Changing RTSP URL&rsquo;s:</strong></li>
</ul>

<p>This easiest way to update your RTSP URL&rsquo;s is to edit the files that were copied from the git folder onto your pi.  This can be done by running:</p>

<p><code>nano ~/cams.sh</code></p>

            </div>
            <footer class="article-footer">
    <a data-url="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" data-id="d0904f9017f523d8bddb9dd66c65f39e" class="article-share-link">
        Share
    </a>
    
    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix/#disqus_thread" class="article-comment-link">
        Comments
    </a>
    
</footer>

        </div>

        
<nav id="article-nav">
    
    <a href="http://localhost:1313/blog/2015/08/10/welcome-to-my-blog" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Older
      </strong>
      <div class="article-nav-title">Welcome to my Blog!</div>
    </a>
    

    
    <a href="http://localhost:1313/blog/2015/08/29/pi-cam-matrix-v2" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Newer
      </strong>
      <div class="article-nav-title">Pi Cam Matrix v2</div>
    </a>
    
</nav>


    </article>
    <section id="comments">
        <div id="disqus_thread">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mholttech';
    var disqus_identifier = 'http:\/\/localhost:1313\/blog\/2015\/08\/21\/raspberry-pi-camera-matrix';
    var disqus_title = 'Raspberry Pi Camera Matrix';
    var disqus_url = 'http:\/\/localhost:1313\/blog\/2015\/08\/21\/raspberry-pi-camera-matrix';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </section>

</section>

    <aside id="sidebar">
    
<div class="widget-wrap">
    <h3 class="widget-title">
        Recents
    </h3>
    <div class="widget">
        <ul id="recent-post">
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://localhost:1313/categories/puppet">
                        Puppet
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://localhost:1313/blog/2015/12/04/getting-started-with-puppet" class="title">Getting Started with Puppet</a></p>
                    <p class="item-date">
                        <time datetime="2015-12-04 17:04:01 -0800 PST" itemprop="datePublished">2015-12-04</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://localhost:1313/categories/mac%20management">
                        Mac Management
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://localhost:1313/blog/2015/10/08/our-path-to-mac-management" class="title">Our path to Mac Management</a></p>
                    <p class="item-date">
                        <time datetime="2015-10-08 19:48:15 -0800 -0800" itemprop="datePublished">2015-10-08</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://localhost:1313/categories/unifi%20video">
                        Unifi Video
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://localhost:1313/blog/2015/08/29/pi-cam-matrix-v2" class="title">Pi Cam Matrix v2</a></p>
                    <p class="item-date">
                        <time datetime="2015-08-29 09:50:39 -0800 -0800" itemprop="datePublished">2015-08-29</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-category">
                        <a class="article-category-link" href="http://localhost:1313/categories/unifi%20video">
                        Unifi Video
                        </a>
                    </p>
                    
                    <p class="item-title"><a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" class="title">Raspberry Pi Camera Matrix</a></p>
                    <p class="item-date">
                        <time datetime="2015-08-21 14:46:39 -0800 -0800" itemprop="datePublished">2015-08-21</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="http://localhost:1313/blog/2015/08/21/raspberry-pi-camera-matrix" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-title"><a href="http://localhost:1313/blog/2015/08/10/welcome-to-my-blog" class="title">Welcome to my Blog!</a></p>
                    <p class="item-date">
                        <time datetime="2015-08-10 21:02:17 -0800 -0800" itemprop="datePublished">2015-08-10</time>
                    </p>
                </div>
            </li>
            
        </ul>
    </div>
</div>


    

<div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
        <ul class="category-list">
            
            <li class="category-list-item">
                <a class="category-list-link" href="http://localhost:1313/categories/
    

    


</aside>

</div>
</div>

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015<br>
      Powered by <a href="//gohugo.io">Hugo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>.
    </div>
  </div>
</footer>



<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
=======
<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-08-21T14:46:39-07:00"  data-updated="true" itemprop="datePublished dateCreated">Fri 21 Aug 2015,  2:46 PM</time>
        
           | <a href="#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://www.mholt.tech">Comments</a>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        Raspberry Pi Camera Matrix
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><h2 id="i-have-posted-version-2-of-this-script-herehttpwwwmholttechblog20150829pi-cam-matrix-v2">I have posted version 2 of this script <a href="http://www.mholt.tech/blog/2015/08/29/pi-cam-matrix-v2/">HERE</a></h2>
<p>Over the last few months we’ve been upgrading our Security Cameras, replacing a 10 year old vitek system with the Ubiquiti Unifi Video system.  We just finished installing the last of these Cameras and that included the need to find a new solution for our Children’s Cameras to be displayed onto two TV’s.  I found a Forum Post on the Ubiquiti Community that documented one person’s script to display a <a href="http://community.ubnt.com/t5/UniFi-Video/Tutorial-Raspberry-Pi-4-Cam-Matrix-Viewer-Appliance/m-p/1253309#U1253309">2x2 Camera Matrix on a Raspberry Pi</a></p>

<p>So I went ahead and order 2x Raspberry Pi’s to power both of these displays and thought “Perfect, someone else has done the leg work all I have to do is plug in the RTSP URL’s and presto”.  Unfortunatly, I ran into some issues with screen causing the video to jump a few seconds instead of playing smoothly.  I also couldn’t get the code working as an init.d so I took a different approach using rc.local.</p>

<p>For those that are interested in how to make this happen here’s the instructions and code:</p>

<p><strong>What you’ll need:</strong></p>

<ul>
  <li>Raspberry Pi2 (I got the Canakit Raspberry Pi 2 - Complete Starter Kit off of Amazon, comes with everything you need for this project)</li>
  <li>Unifi NVR Software running the most recent stable release</li>
  <li>HDTV or Computer Monitor capable of 1080p</li>
  <li>MicroSD to SD Card Adapter (Optional, only needed if you have to re-install raspbian)</li>
  <li>Keyboard for initial setup</li>
</ul>

<!--more-->

<h3 id="instructions">Instructions</h3>
<ol>
  <li>
    <p><strong>Put together and connect you PI2</strong></p>

    <p>Refer to the quick-start guide that is in the Box in order to get started with your Raspberry Pi and install Raspbian using the pre-loaded NOOBS installer on the SD Card</p>
  </li>
  <li>
    <p><strong>Configure Raspbian</strong></p>

    <p>Once you arrive at the Raspi-Config screen you should change the default password (Option 2) and set a hostname (Option 8 - A2).</p>

    <p>After this is done click finish and you will be dropped to the command line. Overclocking is also possible, but not required or recommended for what we are doing.</p>

    <p>For more information on raspi-config, see <a href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">https://www.raspberrypi.org/documentation/configuration/raspi-config.md</a></p>
  </li>
  <li>
    <p><strong>Get the code</strong></p>

    <p>You can get the code from GitHub by entering:</p>

    <p><code>git clone https://gist.github.com/dde9de96b6a4d72b7f58.git raspicams</code></p>
  </li>
  <li>
    <p><strong>Edit the files for your configuration</strong></p>

    <ul>
      <li>
        <p>cd into raspicams by entering:</p>

        <p><code>cd ~/raspicams</code></p>
      </li>
      <li>
        <p>edit cams.sh by typing:</p>

        <p><code>nano cams.sh</code></p>
      </li>
      <li>
        <p>replace <rtsp_url_using_ip> with the RTSP url's for your cameras (I recommend using the Low Quality to save bandwidth and using an IP Address instead of FQDN to ensure no issues arrise.)  This url can be found in the NVR under RTSP Service when editing a camera</rtsp_url_using_ip></p>
      </li>
      <li>
        <p>exit nano by hitting ctrl + x then entering y to save and enter to keep the filename</p>
      </li>
      <li>
        <p>edit network-interfaces and set static IP address configuration for eth0 (Optional but Highly Recommended)</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Copy the files into place</strong></p>

    <ul>
      <li>
        <p>While still inside of ~/raspicams run this in order to copy all of these files into place:</p>

        <p><code>sudo chown root:root boot-config.txt network-interfaces rc.local cmdline.txt &amp; sudo chmod +x * &amp; sudo cp boot-config.txt /boot/config.txt &amp; sudo cp cmdline.txt /boot/cmdline.txt &amp; sudo cp rc.local /etc/rc.local &amp; sudo cp cams.sh ~/cams.sh</code></p>
      </li>
      <li>
        <p>If you have also configured a static IP in network-interfaces run this command to copy that file into place:</p>

        <p><code>sudo cp network-interfaces /etc/network/interfaces</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Reboot the Pi</strong></p>

    <p>At this point all of your configuration is done.  All that’s left to do is reboot the Pi and let the cameras load up.  Enter this command to tell the Pi to reboot:</p>

    <p><code>sudo reboot</code></p>
  </li>
</ol>

<h3 id="troubleshooting">Troubleshooting</h3>

<ul>
  <li>
    <p><strong>Display Issues:</strong></p>

    <p>If you’re having strange display issues, such as banding, flickering, or the display just shuts off, it’s somewhat expected for the Raspberry Pi.  To troubleshoot, you’re going to have to make some changes to the /boot/config.txt file in order to force certain modes and resolutions.   The included config.txt works for my setup but your milage may vary depending on your TV/Monitor.</p>
  </li>
  <li>
    <p><strong>Starting with a Fresh Raspbian Install:</strong></p>

    <p>This is where you are going to need that option MicroSD to SD Card adapter.  I’m not going to cover how to do that because the instructions are easily found on the internet.  Easiest ones to follow are at <a href="https://www.raspberrypi.org/documentation/installation/noobs.md">https://www.raspberrypi.org/documentation/installation/noobs.md</a></p>
  </li>
  <li>
    <p><strong>Changing RTSP URL’s:</strong></p>

    <p>This easiest way to update your RTSP URL’s is to edit the files that were copied from the git folder onto your pi.  This can be done by running:</p>

    <p><code>nano ~/cams.sh</code></p>
  </li>
</ul>
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">Michael Holt</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-08-21T14:46:39-07:00"  data-updated="true" itemprop="datePublished dateCreated">Fri 21 Aug 2015,  2:46 PM</time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category label label-primary' href='/blog/categories/raspberry-pi/'>raspberry pi</a> <a class='category label label-primary' href='/blog/categories/ubquiti/'>ubquiti</a> <a class='category label label-primary' href='/blog/categories/unifi-video/'>unifi video</a>
  
</span>


        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.mholt.tech/blog/2015/08/21/raspberry-pi-camera-matrix/" data-via="mholtrlc" data-counturl="http://www.mholt.tech/blog/2015/08/21/raspberry-pi-camera-matrix/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/blog/2015/08/10/welcome-to-my-blog/" title="Previous Post: Welcome to my Blog!">&laquo; Welcome to my Blog!</a></li>
            
            
            <li class="next"><a href="/blog/2015/08/29/pi-cam-matrix-v2/" title="Next Post: Pi Cam Matrix v2">Pi Cam Matrix v2 &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
      <section>
        <h2>Comments</h2>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">About Me</h3>
  </div>
  <div class="list-group text-center">
    <div class="circular"></div>
    <p class="list-group-item-text about-me">I am an IT Administrator, Network Admin, Server Admin, Programmer, and Jack-Of-All-Trades serving the lord and the church with my talents.</p>
    <p class="list-group-item-text about-me"><small>The opinions and posts on this site are my own and are not necessarily shared by my employer.</small></p>
  </div>


</section>
<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating...</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/michaelholttech">@michaelholttech</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'michaelholttech',
            count: 4,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">Mailing List</h3>
  </div>
  <div class="list-group text-center">
    <p></p>
	<p class="list-group-item-text">Get notified of new blog posts</p>
	<form action="http://tech.us11.list-manage.com/subscribe/post?u=a605d0cc07de819746666ff79&amp;id=ccfda3fdaa" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
    <div class="form-group list-group-item">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Your Email Here" autocomplete="off" name="EMAIL" id="mce-EMAIL">
        <span class="input-group-btn">
          <button class="btn btn-default" name="subscribe" id="mc-embedded-subscribe" type="button">Subscribe</button>
        </span>
      </div>
    </div>
	</form>
</section>

<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Categories</h3>
  </div>
  <div class="list-group">
    
    
    <a class="list-group-item " href="/blog/categories/misc/index.html">
        <span class="badge">1</span>
        misc
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/unifi-video/index.html">
        <span class="badge">2</span>
        unifi video
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/ubquiti/index.html">
        <span class="badge">2</span>
        ubquiti
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/raspberry-pi/index.html">
        <span class="badge">2</span>
        raspberry pi
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/munki/index.html">
        <span class="badge">1</span>
        munki
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/simian/index.html">
        <span class="badge">1</span>
        simian
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/mac-management/index.html">
        <span class="badge">2</span>
        mac management
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/puppet/index.html">
        <span class="badge">1</span>
        puppet
      </a>
    
  </div>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Twitter</h3>
  </div>

  <div id="tw-widget1"></div>
  <div class="text-right text-muted" id="twit_footer">
      <a href="https://twitter.com/mholtrlc">@mholtrlc</a> on Twitter
    </div>
</section>

<script type="text/javascript">

  var config5 = {
  "id": '630536674305445888',
  "domId": '',
  "maxTweets": 3,
  "enableLinks": true,
  "showUser": true,
  "showTime": true,
  "dateFunction": '',
  "showRetweet": false,
  "customCallback": handleTweets,
  "showInteraction": true,
  "showImages": false
};

function handleTweets(tweets){
    var x = tweets.length;
    var n = 0;
    var element = document.getElementById('tw-widget1');
    var html = '<ul class="list-group">';
    while(n < x) {
      var tweet = tweets[n].replace(/<img[^>"']*((("[^"]*")|('[^']*'))[^"'>]*)*>/g,"");
      html += '<li class="list-group-item">' + tweet + '</li>';
      n++;
    }
    html += '</ul>';
    element.innerHTML = html;
}

twitterFetcher.fetch(config5);
  twitterFetcher.fetch(config1);
</script>

    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - Michael Holt<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,

  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'mholttech';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.mholt.tech/blog/2015/08/21/raspberry-pi-camera-matrix/';
        var disqus_url = 'http://www.mholt.tech/blog/2015/08/21/raspberry-pi-camera-matrix/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
>>>>>>> parent of 90de704... Erase old site
</html>
