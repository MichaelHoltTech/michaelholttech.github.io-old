<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>'Our Path to Mac Mangement' - A Church MacAdmin's Blog</title>
  <meta name="author" content="Michael Holt">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.mholt.tech/blog/2015/10/08/our-path-to-mac-mangement/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="A Church MacAdmin's Blog" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://www.mholt.tech/blog/2015/10/08/our-path-to-mac-mangement/">
  <meta property="og:title" content="'Our Path to Mac Mangement' - A Church MacAdmin's Blog">
  

  <!-- ... -->

<link href="http://bootswatch.com/yeti/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/twitter.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/aboutme.css" rel="stylesheet" type="text/css">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/javascripts/footnote.js"></script>
<script src="/javascripts/twitterFetcher_min.js"></script>
<!-- ... -->


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42255033-2', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">A Church MacAdmin's Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="www.mholt.tech">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="A Church MacAdmin's Blog" />
    
    <meta itemprop="url" content="http://www.mholt.tech" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-10-08T19:48:15-07:00"  data-updated="true" itemprop="datePublished dateCreated">Thu  8 Oct 2015,  7:48 PM</time>
        
           | <a href="#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://www.mholt.tech">Comments</a>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        'Our Path to Mac Mangement'
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><h3 id="where-we-started">Where we Started</h3>

<blockquote>
  <p>“In the beginning God created…” the Mac… “and it was good”</p>
</blockquote>

<p>Ok maybe I went a little far in that one.  I came on staff at Real Life Church in 2012 and at that time we were mostly a PC shop with the exception being Pastors exclusively having a Mac (With Local Admin Access and no admin account for IT).  Over the next 2 years we realized that we got significantly more support requests on our PCs than for our Macs. We were running on an aging SBS 2008 server that was maxed out on licensing and we were continuing to grow.  After numerous conversations with my Director and leadership the decision was clear that we needed to make the transition to a 100% Mac shop in our church.</p>

<!--more-->

<p>This decision was based on the need to purchase new hardware and spend hundreds of man hours (as the solo IT Admin) in building out a new server infrastructure to manage the windows Machines with no guarantee that it would cut down on the ongoing support needs.  The direction was clear at the beginning of 2014 that we would be transitioning to the Macs as soon as we had the capital to spend on them.</p>

<p>Knowing this, I began to research and address ways to manage software, patches, and support the new influx of Macs.</p>

<h3 id="introducing-the-munki">Introducing the Munki</h3>

<p><img src="https://lh3.googleusercontent.com/-SZsDtJV44Ic/T8ytQjvo24I/AAAAAAAAAlc/A4b9DjdBWGk/s640/blogger-image-1072467874.jpg" alt="alt text" title="Oh No, Monkeys on a Mac! - Image courtesy of http://nikiwallacedesign.blogspot.com/2012/06/think-first-design-later.html" /></p>

<p>Ok so I’m not actually talking about a real Monkey here.  Munki is a set of tools that can be used to manage software installs on OS X Client Machines.  It was developed by Gregg Neagle (@gregneagle) at Walt Disney Animation Studios and was open sourced for anyone to use and contribute to.  I had heard about Munki a couple of times in discussions with Churches and other people about how to manage a Mac and finally decided to start looking into it.  In addition to do managed and optional installs as well as updates of 3rd party software, it is also capable of installing Apple Software Updates.</p>

<h3 id="our-requirements-for-staff-macs">Our Requirements for Staff Macs</h3>

<p>One of the first things we decided on was some of the requirements and restrictions that we wanted in place on the Mac.  Every organization is different but this is where we settled.</p>

<ol>
  <li>
    <p>No end user will be an administrator on their Machine</p>
  </li>
  <li>
    <p>Only approved software can be installed and can be found inside Munki</p>
  </li>
  <li>
    <p>No App Store apps allowed
One of the continuous debates is Admin vs No Admin regardless of platform (Mac vs PC).  We decided on the no admin approach because we did not want our staff being able to install unapproved software or changing system settings that could negatively affect their Machine.</p>
  </li>
</ol>

<h3 id="challenges">Challenges</h3>

<p>I spent about 10 months developing our Munki infrastructure and learning how it worked.  Part of the reason for taking this long is when first evaluating it at the beginning of the year there was already progress being made on version 2 that turned Munki into a replica of the Apple App Store in terms of layout and usability.</p>

<p>The primary opposition we faced was a number of employees responded with: “I’ve always used a PC and have never touched a Mac, how am I supposed to get my job done?”  We encouraged our users to keep an open mind and we spent time with them after migrating their data showing them the basics of how to use a Mac and spending 15-20 minutes showing them the basics on how to open documents and applications.  Within a few months I was hearing from everyone that they “loved” their Macs and are glad to have them.</p>

<h3 id="issues-with-non-admins-and-munki">Issues with Non-Admins and Munki</h3>

<p>After a few months in we started finding a few issues with our configuration and stance of no Local Admin access.  This included:</p>

<ol>
  <li>
    <p>Users could not change their energy saver preferences</p>
  </li>
  <li>
    <p>Users could not install home printers</p>
  </li>
  <li>
    <p>Printers would “pause” when running out of paper or toner, and paper jams. Admin credentials were required to resume printing</p>
  </li>
  <li>
    <p>Management of software updates became cumbersome and users were requesting software that would have been available in the Mac App Store</p>
  </li>
</ol>

<h3 id="our-next-steps">Our Next Steps</h3>

<p>We have been using Munki for a year now and when re-evaluating our setup and options we discovered that we were spending significantly more than we had anticipated by running our system on Amazon EC2.  We also wanted to address some underlying issues with configuration management, printers, and opening up the App Store.  This led us to make some new changes which I will highlight here and detail further in future blog posts.</p>

<p>We decided to go with the following systems to comprise our Mac Management Solution:</p>

<ol>
  <li>
    <p><a href="https://github.com/google/simian"><strong>Simian</strong></a>, a backend solution to power the Munki client, hosted on Google App Engine and developed by Google MacOps, along with customizations to Munki to create a secure connection between the client and server.</p>
  </li>
  <li>
    <p><a href="https://puppetlabs.com/"><strong>Puppet</strong></a>, a configuration management system that allows you to define the state of your Machines.</p>
  </li>
  <li>
    <p><a href="https://github.com/Munkireport/Munkireport-php"><strong>Munkireport-php</strong></a>, a powerful system reporting utility that provides detailed system information on your Macs</p>
  </li>
  <li>
    <p><a href="https://github.com/grahamgilbert/Crypt"><strong>Crypt</strong></a>, a Filevault Key Escrow solution built by Graham Gilbert for recording filevault recovery keys</p>
  </li>
  <li>
    <p><a href="github.com/grahamgilbert/Macnamer"><strong>Macnamer</strong></a>, a web app and Mac script that runs on your Mac to force your Machine to follow a naming convention with an automatically generated number suffix. Another solution built by Graham Gilbert</p>
  </li>
  <li>
    <p><a href="https://github.com/salopensource/sal"><strong>Sal</strong></a>, a Multi-Tennant reporting dashboard similar to Munkireport that provides another way of viewing system information.</p>
  </li>
  <li>
    <p><a href="https://github.com/autopkg/autopkg"><strong>Autopkg</strong></a>, automates the download and manifest creation of software for import into simian.  This is not fully automated but allows me to simply copy paste into Simian to provide updates.</p>
  </li>
  <li>
    <p><a href="https://github.com/lindegroup/autopkgr"><strong>Autopkgr</strong></a>, ties into Autopkg and checks for software updates every night and sends an email alert when software updates are installed</p>
  </li>
</ol>

<p><strong>Not Yet Implemented:</strong></p>

<ol>
  <li><a href="https://github.com/grahamgilbert/imagr"><strong>Imagr</strong></a>, an open source replacement to DeployStudio for workstation imaging and thin-provisioning.</li>
</ol>

<p>Everything except Simian runs inside a single server on Digital Ocean inside of Docker Containers.  I plan on publishing additional information on my setup and instructions on how to create this setup in the near future.</p>
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">Michael Holt</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-10-08T19:48:15-07:00"  data-updated="true" itemprop="datePublished dateCreated">Thu  8 Oct 2015,  7:48 PM</time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category label label-primary' href='/blog/categories/mac-management/'>mac management</a> <a class='category label label-primary' href='/blog/categories/munki/'>munki</a> <a class='category label label-primary' href='/blog/categories/simian/'>simian</a>
  
</span>


        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.mholt.tech/blog/2015/10/08/our-path-to-mac-mangement/" data-via="mholtrlc" data-counturl="http://www.mholt.tech/blog/2015/10/08/our-path-to-mac-mangement/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/blog/2015/08/29/pi-cam-matrix-v2/" title="Previous Post: Pi Cam Matrix v2">&laquo; Pi Cam Matrix v2</a></li>
            
            
          </ul>
        
      </footer>
    </article>
    
      <section>
        <h2>Comments</h2>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">About Me</h3>
  </div>
  <div class="list-group text-center">
    <div class="circular"></div>
    <p class="list-group-item-text about-me">I am an IT Administrator, Network Admin, Server Admin, Programmer, and Jack-Of-All-Trades serving the lord and the church with my talents.</p>
    <p class="list-group-item-text about-me"><small>The opinions and posts on this site are my own and are not necessarily shared by my employer.</small></p>
  </div>


</section>
<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating...</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/michaelholttech">@michaelholttech</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'michaelholttech',
            count: 4,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">Mailing List</h3>
  </div>
  <div class="list-group text-center">
    <p></p>
	<p class="list-group-item-text">Get notified of new blog posts</p>
	<form action="http://tech.us11.list-manage.com/subscribe/post?u=a605d0cc07de819746666ff79&amp;id=ccfda3fdaa" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
    <div class="form-group list-group-item">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Your Email Here" autocomplete="off" name="EMAIL" id="mce-EMAIL">
        <span class="input-group-btn">
          <button class="btn btn-default" name="subscribe" id="mc-embedded-subscribe" type="button">Subscribe</button>
        </span>
      </div>
    </div>
	</form>
</section>

<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Categories</h3>
  </div>
  <div class="list-group">
    
    
    <a class="list-group-item " href="/blog/categories/misc/index.html">
        <span class="badge">1</span>
        misc
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/unifi-video/index.html">
        <span class="badge">2</span>
        unifi video
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/ubquiti/index.html">
        <span class="badge">2</span>
        ubquiti
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/raspberry-pi/index.html">
        <span class="badge">2</span>
        raspberry pi
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/munki/index.html">
        <span class="badge">1</span>
        munki
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/simian/index.html">
        <span class="badge">1</span>
        simian
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/mac-management/index.html">
        <span class="badge">1</span>
        mac management
      </a>
    
  </div>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Twitter</h3>
  </div>

  <div id="tw-widget1"></div>
  <div class="text-right text-muted" id="twit_footer">
      <a href="https://twitter.com/mholtrlc">@mholtrlc</a> on Twitter
    </div>
</section>

<script type="text/javascript">

  var config5 = {
  "id": '630536674305445888',
  "domId": '',
  "maxTweets": 3,
  "enableLinks": true,
  "showUser": true,
  "showTime": true,
  "dateFunction": '',
  "showRetweet": false,
  "customCallback": handleTweets,
  "showInteraction": true,
  "showImages": false
};

function handleTweets(tweets){
    var x = tweets.length;
    var n = 0;
    var element = document.getElementById('tw-widget1');
    var html = '<ul class="list-group">';
    while(n < x) {
      var tweet = tweets[n].replace(/<img[^>"']*((("[^"]*")|('[^']*'))[^"'>]*)*>/g,"");
      html += '<li class="list-group-item">' + tweet + '</li>';
      n++;
    }
    html += '</ul>';
    element.innerHTML = html;
}

twitterFetcher.fetch(config5);
  twitterFetcher.fetch(config1);
</script>

    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - Michael Holt<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,

  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'mholttech';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.mholt.tech/blog/2015/10/08/our-path-to-mac-mangement/';
        var disqus_url = 'http://www.mholt.tech/blog/2015/10/08/our-path-to-mac-mangement/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
